<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Property - MyNest</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-gray-100 flex relative">

  <!-- ✅ Sidebar (Replaced with MyNest version) -->
  <aside class="sidebar">
    <!-- Logo Section -->
    <div class="logo">
      <img src="logo.png" alt="RentEase Logo" class="logo-img">
      <div>
        <h3 class="brand-name">MyNest</h3>
        <p class="brand-tagline">Find Your Perfect Home</p>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="nav">
      <p class="nav-title">Navigation</p>
      <ul>
        <li><a href="home.html"><span class="icon">🔍</span> Search Properties</a></li>
        <li><a href="add-property.html" class="active"><span class="icon">➕</span> Add Property</a></li>
        <li><a href="my-properties.html"><span class="icon">📋</span> My Properties</a></li>
        <li><a href="add-homestay.html"><span class="icon">🏡</span> Add Homestay</a></li>
        <li><a href="signup.html" id="signup-link"><span class="icon">📝</span> Sign Up</a></li>
        <li><a href="login.html" id="login-link"><span class="icon">🔑</span> Login</a></li>
      </ul>
    </nav>

    <!-- Quick Stats -->
    <div class="stats">
      <p class="stats-title">Quick Stats</p>
      <p><span class="icon">📍</span> Active Cities <span class="highlight blue">25+</span></p>
      <p><span class="icon">🏢</span> Listed Properties <span class="highlight green">1000+</span></p>
    </div>

    <!-- Welcome Box -->
    <div class="welcome">
      <div class="avatar"></div>
      <div>
        <!-- <p class="welcome-title" id="welcome-username"></p>
        <p class="welcome-sub"></p> -->
      </div>
    </div>
  </aside>

  <!-- ✅ Main Container (Unchanged) -->
  <main class="flex-1 max-w-4xl mx-auto mt-6 bg-white shadow-lg rounded-lg p-6">
    <h2 class="text-2xl font-semibold text-gray-800 mb-6">🏠 Add Your Property</h2>

    <form id="propertyForm" enctype="multipart/form-data" class="space-y-6">
      <!-- Basic Info -->
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-3">Basic Information</h3>
        <div class="grid md:grid-cols-2 gap-4">
          <input type="text" name="title" placeholder="Property Title *" required class="input">
          <select name="type" required class="input">
            <option value="">Property Type *</option>
            <option>PG</option>
            <option>Flat</option>
            <option>House</option>
            <option>Villa</option>
          </select>
          <input type="text" name="location" placeholder="Location/Area *" required class="input">
          <input type="text" name="city" placeholder="City *" required class="input">
        </div>
        <textarea name="address" placeholder="Full Address" class="input mt-3 w-full"></textarea>
      </div>

      <!-- Pricing & Details -->
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-3">Pricing & Property Details</h3>
        <div class="grid md:grid-cols-3 gap-4">
          <input type="number" name="price" placeholder="Monthly Rent (₹) *" required class="input">
          <input type="number" name="deposit" placeholder="Security Deposit (₹)" class="input">
          <input type="number" name="sqFt" placeholder="Area (Sq Ft)" class="input">
          <input type="number" name="beds" placeholder="Bedrooms" class="input">
          <input type="number" name="baths" placeholder="Bathrooms" class="input">
          <select name="furnishing" class="input">
            <option value="">Furnishing Status</option>
            <option>Fully Furnished</option>
            <option>Semi Furnished</option>
            <option>Unfurnished</option>
          </select>
        </div>
        <select name="gender" class="input mt-3 w-full">
          <option value="">Gender Preference</option>
          <option>Male</option>
          <option>Female</option>
          <option>Family</option>
          <option>Any</option>
        </select>
      </div>

      <!-- Amenities -->
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-3">Amenities & Features</h3>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
          <label><input type="checkbox" name="amenities" value="WiFi"> WiFi</label>
          <label><input type="checkbox" name="amenities" value="Parking"> Parking</label>
          <label><input type="checkbox" name="amenities" value="Air Conditioning"> Air Conditioning</label>
          <label><input type="checkbox" name="amenities" value="Gym"> Gym</label>
          <label><input type="checkbox" name="amenities" value="Food Included"> Food Included</label>
          <label><input type="checkbox" name="amenities" value="Laundry Service"> Laundry Service</label>
        </div>
      </div>

      <!-- Images -->
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-3">Property Photos</h3>
        <input type="file" name="images" id="images" multiple accept="image/*" class="block w-full border p-2 rounded">
        <div id="preview" class="mt-3 flex gap-2 flex-wrap"></div>
      </div>

      <!-- Description & Contact -->
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-3">Description & Contact</h3>
        <textarea name="description" placeholder="Describe your property..." class="input w-full"></textarea>
        <input type="text" name="phone" placeholder="Contact Number *" required class="input mt-3">
      </div>

      <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition">
        + Publish Property
      </button>
    </form>
  </main>

  <!-- ✅ Bottom-right greeting (unchanged) -->
  <div id="user-greeting" class="fixed bottom-4 right-6 bg-white shadow-md px-4 py-2 rounded-full text-gray-700 font-medium hidden">
    👋 <span id="userNameDisplay"></span>
  </div>

  <!-- Scripts (unchanged) -->
  <script>
    const style = document.createElement("style");
    style.innerHTML = `.input { border: 1px solid #ddd; padding: 10px; border-radius: 6px; width: 100%; }`;
    document.head.appendChild(style);

    // Image preview
    document.getElementById("images").addEventListener("change", function() {
      const preview = document.getElementById("preview");
      preview.innerHTML = "";
      Array.from(this.files).forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
          const img = document.createElement("img");
          img.src = e.target.result;
          img.className = "w-24 h-24 object-cover rounded shadow";
          preview.appendChild(img);
        };
        reader.readAsDataURL(file);
      });
    });

    // ✅ Login protection and greeting
    const token = localStorage.getItem("token");
    const userName = localStorage.getItem("userName");

    if (!token) {
      alert("⚠️ You must be logged in to add a property.");
      window.location.href = "login.html";
    } else {
      const authLink = document.getElementById("login-link");
      if (authLink) authLink.style.display = "none";

      const greetingDiv = document.getElementById("user-greeting");
      const userNameDisplay = document.getElementById("userNameDisplay");
      const welcomeUser = document.getElementById("welcome-username");

      userNameDisplay.textContent = userName || "User";
      if (welcomeUser) welcomeUser.textContent = `Welcome, ${userName || "User"} 👋`;

      greetingDiv.classList.remove("hidden");
    }
  </script>

  <script src="add-property.js"></script>
</body>
</html>
